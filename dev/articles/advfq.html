<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Creating ADVFQ • admiralophtha</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating ADVFQ">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">admiralophtha</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.3.0.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/admiralophtha.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-user-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">User Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-user-guides">
<li><a class="dropdown-item" href="../articles/standards.html">Ophthalmology Standards</a></li>
    <li><a class="dropdown-item" href="../articles/adoe.html">Creating ADOE</a></li>
    <li><a class="dropdown-item" href="../articles/adbcva.html">Creating ADBCVA</a></li>
    <li><a class="dropdown-item" href="../articles/advfq.html">Creating ADVFQ</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://pharmaverse.slack.com/" aria-label="Slack"><span class="fa fa-slack"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../articles/website-versions.html" aria-label="Previous Release Websites"><span class="fa fa-history"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiralophtha/issues/new/choose" aria-label="New Issue"><span class="fa fa-bug"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pharmaverse/admiralophtha" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="advfq_files/dt-scroll-1.0.0/style.css" rel="stylesheet">
<script src="advfq_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="advfq_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="advfq_files/datatables-binding-0.34.0/datatables.js"></script><link href="advfq_files/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="advfq_files/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="advfq_files/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="advfq_files/dt-ext-buttons-1.13.6/css/buttons.dataTables.min.css" rel="stylesheet">
<script src="advfq_files/dt-ext-buttons-1.13.6/js/dataTables.buttons.min.js"></script><script src="advfq_files/dt-ext-buttons-1.13.6/js/buttons.html5.min.js"></script><script src="advfq_files/dt-ext-buttons-1.13.6/js/buttons.colVis.min.js"></script><script src="advfq_files/dt-ext-buttons-1.13.6/js/buttons.print.min.js"></script><link href="advfq_files/dt-ext-colreorder-1.13.6/css/colReorder.dataTables.min.css" rel="stylesheet">
<script src="advfq_files/dt-ext-colreorder-1.13.6/js/dataTables.colReorder.min.js"></script><link href="advfq_files/dt-ext-scroller-1.13.6/css/scroller.dataTables.min.css" rel="stylesheet">
<script src="advfq_files/dt-ext-scroller-1.13.6/js/dataTables.scroller.min.js"></script><link href="advfq_files/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet">
<script src="advfq_files/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="advfq_files/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet">
<script src="advfq_files/selectize-0.12.0/selectize.min.js"></script><link href="advfq_files/dt-plugin-searchhighlight-1.13.6/source.css" rel="stylesheet">
<script src="advfq_files/dt-plugin-searchhighlight-1.13.6/jquery.highlight.js"></script><script src="advfq_files/dt-plugin-searchhighlight-1.13.6/source.min.js"></script><link href="advfq_files/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">
<script src="advfq_files/crosstalk-1.2.2/js/crosstalk.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Creating ADVFQ</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiralophtha/blob/main/vignettes/advfq.Rmd" class="external-link"><code>vignettes/advfq.Rmd</code></a></small>
      <div class="d-none name"><code>advfq.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This article describes creating an ADVFQ ADaM with Visual Functioning
Questionnaire data for ophthalmology endpoints. It is to be used in
conjunction with the article on <a href="https://pharmaverse.github.io/admiral/articles/bds_finding.html" class="external-link">creating
a BDS dataset from SDTM</a>. As such, derivations and processes that are
not specific to ADVFQ are mostly absent, and the user is invited to
consult the aforementioned article for guidance.</p>
<p>The full, open-source VFQ questionnaire can be accessed <a href="https://www.nei.nih.gov/learn-about-eye-health/outreach-resources/outreach-materials/visual-function-questionnaire-25" class="external-link">here</a>.</p>
<p><strong>Note</strong>: <em>All examples assume CDISC SDTM and/or ADaM
format as input unless otherwise specified. Also, some of the example
datasets in this vignette contain more records than are displayed by
default, but the number of displayed records can be expanded using the
selectors at the bottom.</em></p>
<div class="section level3">
<h3 id="dataset-contents">Dataset Contents<a class="anchor" aria-label="anchor" href="#dataset-contents"></a>
</h3>
<p><a href="https://pharmaverse.github.io/admiralophtha/">admiralophtha</a> suggests to populate ADVFQ solely with
VFQ-related records. Any other questionnaire data should be placed in
separate datasets (e.g. ADQS).</p>
<p>The records in ADVFQ can be categorized in four groups:</p>
<ol style="list-style-type: decimal">
<li>The <strong>original</strong>/<strong>raw</strong> records coming
from the VFQ itself. These include both the Base items in the standard
VFQ-25 and the Optional items which can be added to form the VFQ-39.
Importantly, not all of the items are measured on the same scale.</li>
<li>The <strong>transformed</strong> records, which are in a one-to-one
correspondence with the original records and serve to recode the latter
on the same 0 - 100 scale.</li>
<li>The <strong>composite scores by category</strong>, which are means
of all the transformed records from within a category, e.g. “Near
activities score”. These composite scores can be calculated including or
excluding the Optional items.</li>
<li>The <strong>overall composite scores</strong>, which are means of
the composite scores, again including or excluding the Optional
items.</li>
</ol>
</div>
<div class="section level3">
<h3 id="required-packages">Required Packages<a class="anchor" aria-label="anchor" href="#required-packages"></a>
</h3>
<p>The examples of this vignette require the following packages.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/pharmaversesdtm/" class="external-link">pharmaversesdtm</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/admiraldev/" class="external-link">admiraldev</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pharmaverse.github.io/admiralophtha/">admiralophtha</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="programming-workflow">Programming Workflow<a class="anchor" aria-label="anchor" href="#programming-workflow"></a>
</h2>
<ul>
<li><a href="#setup_lookup">Reading In Data and Setting Up Lookup
Tables</a></li>
<li><a href="#mapping_raw">Initial Set Up and Mapping the Raw
Records</a></li>
<li><a href="#deriving_transformed">Deriving the Transformed
Parameters</a></li>
<li><a href="#deriving_composite">Deriving the Composite
Parameters</a></li>
<li><a href="#further">Further Derivations of Standard BDS
Variables</a></li>
<li><a href="#example">Example Script</a></li>
</ul>
<div class="section level3">
<h3 id="setup_lookup">Reading In Data and Setting Up Lookup Tables<a class="anchor" aria-label="anchor" href="#setup_lookup"></a>
</h3>
<p>To start, all datasets needed for the creation of the VFQ analysis
dataset should be read into the environment. For the purpose of
demonstration we shall use the <a href="https://pharmaverse.github.io/pharmaversesdtm/" class="external-link">pharmaversesdtm</a>
<code>qs_ophtha</code> and the <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> ADSL test
datasets. Note that the former only contains VFQ records.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"admiral_adsl"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"qs_ophtha"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">adsl</span> <span class="op">&lt;-</span> <span class="va">admiral_adsl</span></span>
<span><span class="va">qs</span> <span class="op">&lt;-</span> <span class="va">qs_ophtha</span></span></code></pre></div>
<p>Next, it will prove useful to set up lookup tables ahead of time for
the <code>PARAM</code>/<code>PARAMCD</code> and <code>PARCATy</code>
variables for the original, transformed and composite parameters. This
is so that when the latter two are derived later in the script, we can
simply assign <code>PARAMCD</code> (or one of the <code>PARCATy</code>s)
and then perform a merge with the lookup tables to associate to them the
remaining variables as well. <strong>Please note that the mappings
described through these lookup tables may vary from company to company -
this is just what <a href="https://pharmaverse.github.io/admiralophtha/">admiralophtha</a> suggests.</strong></p>
<p>For convenience, we suggest setting up three separate lookup tables.
You can peruse how the tables are structured below - for the full set up
code, please visit the <a href="https://github.com/pharmaverse/admiralophtha/blob/main/inst/templates/ad_advfq.R" class="external-link">ad_advfq.R</a>
template. There is a special importance for the contents of
<code>PARCAT4</code> since this determines the categories which are then
averaged within the <a href="#deriving_composite">composite
parameters</a>. You can differentiate the Base Items from the Optional
ones using <code>PARCAT5</code>, and the original, transformed and
composite parameters using <code>PARCAT2</code>.</p>
<div class="section level5">
<h5 id="original-items-param_lookup_original">Original Items (<code>param_lookup_original</code>)<a class="anchor" aria-label="anchor" href="#original-items-param_lookup_original"></a>
</h5>
<div id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;VFQ101&quot;,&quot;VFQ102&quot;,&quot;VFQ103&quot;,&quot;VFQ104&quot;,&quot;VFQ105&quot;,&quot;VFQ106&quot;,&quot;VFQ107&quot;,&quot;VFQ108&quot;,&quot;VFQ109&quot;,&quot;VFQ110&quot;,&quot;VFQ111&quot;,&quot;VFQ112&quot;,&quot;VFQ113&quot;,&quot;VFQ114&quot;,&quot;VFQ115&quot;,&quot;VFQ115A&quot;,&quot;VFQ115B&quot;,&quot;VFQ115C&quot;,&quot;VFQ116&quot;,&quot;VFQ116A&quot;,&quot;VFQ117&quot;,&quot;VFQ118&quot;,&quot;VFQ119&quot;,&quot;VFQ120&quot;,&quot;VFQ121&quot;,&quot;VFQ122&quot;,&quot;VFQ123&quot;,&quot;VFQ124&quot;,&quot;VFQ125&quot;,&quot;VFQ1A01&quot;,&quot;VFQ1A02&quot;,&quot;VFQ1A03&quot;,&quot;VFQ1A04&quot;,&quot;VFQ1A05&quot;,&quot;VFQ1A06&quot;,&quot;VFQ1A07&quot;,&quot;VFQ1A08&quot;,&quot;VFQ1A09&quot;,&quot;VFQ1A11A&quot;,&quot;VFQ1A11B&quot;,&quot;VFQ1A12&quot;,&quot;VFQ1A13&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Accomplish Less Than You Would Like&quot;,&quot;Are You Currently Driving&quot;,&quot;Difficulty Doing Work/Hobbies&quot;,&quot;Difficulty Driving at Night&quot;,&quot;Difficulty Driving During Daytime&quot;,&quot;Difficulty Entertaining Friends&quot;,&quot;Difficulty Figure Out Bill Accuracy&quot;,&quot;Difficulty Finding on Crowded Shelf&quot;,&quot;Difficulty Going Down Step at Night&quot;,&quot;Difficulty Going Out to See Movies&quot;,&quot;Difficulty Noticing Objects to Side&quot;,&quot;Difficulty Picking Out Own Clothes&quot;,&quot;Difficulty Reading Newspapers&quot;,&quot;Difficulty Reading Small Print&quot;,&quot;Difficulty Reading Street Signs&quot;,&quot;Difficulty Recognizing People&quot;,&quot;Difficulty Seeing How People React&quot;,&quot;Difficulty Seeing Programs on TV&quot;,&quot;Difficulty Shaving or Styling Hair&quot;,&quot;Difficulty Taking Part in Sports&quot;,&quot;Difficulty Visiting With People&quot;,&quot;Do You Have More Help From Others&quot;,&quot;Driving in Difficult Conditions&quot;,&quot;Eye Pain Keep From Doing What Like&quot;,&quot;Eyesight Using Both Eyes Is&quot;,&quot;How Much Pain in and Around Eyes&quot;,&quot;How Often You Worry About Eyesight&quot;,&quot;I Don&#39;t Go Out of My Home Alone&quot;,&quot;I Feel Frustrated a Lot of the Time&quot;,&quot;I Need a Lot of Help From Others&quot;,&quot;I Stay Home Most of the Time&quot;,&quot;Limited in How Long You Can Work&quot;,&quot;Limited in Kinds of Things Can Do&quot;,&quot;Main Reason You Gave Up Driving&quot;,&quot;Much Less Control Over What I Do&quot;,&quot;Never Driven or Given Up Driving&quot;,&quot;Often Irritable Because Eyesight&quot;,&quot;Rate Your Eyesight Now&quot;,&quot;Rate Your Overall Health&quot;,&quot;Rely Too Much on What Others Tell&quot;,&quot;Worry I&#39;ll Do Embarrassing Things&quot;,&quot;Your Overall Health Is&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;VFQ101&quot;,&quot;VFQ102&quot;,&quot;VFQ103&quot;,&quot;VFQ104&quot;,&quot;VFQ105&quot;,&quot;VFQ106&quot;,&quot;VFQ107&quot;,&quot;VFQ108&quot;,&quot;VFQ109&quot;,&quot;VFQ110&quot;,&quot;VFQ111&quot;,&quot;VFQ112&quot;,&quot;VFQ113&quot;,&quot;VFQ114&quot;,&quot;VFQ115&quot;,&quot;VFQ115A&quot;,&quot;VFQ115B&quot;,&quot;VFQ115C&quot;,&quot;VFQ116&quot;,&quot;VFQ116A&quot;,&quot;VFQ117&quot;,&quot;VFQ118&quot;,&quot;VFQ119&quot;,&quot;VFQ120&quot;,&quot;VFQ121&quot;,&quot;VFQ122&quot;,&quot;VFQ123&quot;,&quot;VFQ124&quot;,&quot;VFQ125&quot;,&quot;VFQ1A01&quot;,&quot;VFQ1A02&quot;,&quot;VFQ1A03&quot;,&quot;VFQ1A04&quot;,&quot;VFQ1A05&quot;,&quot;VFQ1A06&quot;,&quot;VFQ1A07&quot;,&quot;VFQ1A08&quot;,&quot;VFQ1A09&quot;,&quot;VFQ1A11A&quot;,&quot;VFQ1A11B&quot;,&quot;VFQ1A12&quot;,&quot;VFQ1A13&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;VFQ-25 INTERVIEWER ADMINISTERED&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Original Items&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;color vision&quot;,&quot;dependency&quot;,&quot;distance vision&quot;,&quot;driving&quot;,&quot;driving (filter item)&quot;,&quot;general health&quot;,&quot;general vision&quot;,&quot;near vision&quot;,&quot;ocular pain&quot;,&quot;peripheral vision&quot;,&quot;role limitations&quot;,&quot;social fx&quot;,&quot;well-being/distress&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Color Vision&quot;,&quot;Distance Activities&quot;,&quot;Driving&quot;,&quot;General Health&quot;,&quot;General Vision&quot;,&quot;Near Activities&quot;,&quot;Ocular Pain&quot;,&quot;Peripheral Vision&quot;,&quot;Vision Specific: Dependency&quot;,&quot;Vision Specific: Mental Health&quot;,&quot;Vision Specific: Role Difficulties&quot;,&quot;Vision Specific: Social Functioning&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Base Item&quot;,&quot;Optional Item&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["VFQ101","VFQ102","VFQ103","VFQ104","VFQ105","VFQ106","VFQ107","VFQ108","VFQ109","VFQ110","VFQ111","VFQ112","VFQ113","VFQ114","VFQ115","VFQ115A","VFQ115B","VFQ115C","VFQ116","VFQ116A","VFQ117","VFQ118","VFQ119","VFQ120","VFQ121","VFQ122","VFQ123","VFQ124","VFQ125","VFQ1A01","VFQ1A02","VFQ1A03","VFQ1A04","VFQ1A05","VFQ1A06","VFQ1A07","VFQ1A08","VFQ1A09","VFQ1A11A","VFQ1A11B","VFQ1A12","VFQ1A13"],["Your Overall Health Is","Eyesight Using Both Eyes Is","How Often You Worry About Eyesight","How Much Pain in and Around Eyes","Difficulty Reading Newspapers","Difficulty Doing Work/Hobbies","Difficulty Finding on Crowded Shelf","Difficulty Reading Street Signs","Difficulty Going Down Step at Night","Difficulty Noticing Objects to Side","Difficulty Seeing How People React","Difficulty Picking Out Own Clothes","Difficulty Visiting With People","Difficulty Going Out to See Movies","Are You Currently Driving","Never Driven or Given Up Driving","Main Reason You Gave Up Driving","Difficulty Driving During Daytime","Difficulty Driving at Night","Driving in Difficult Conditions","Accomplish Less Than You Would Like","Limited in How Long You Can Work","Eye Pain Keep From Doing What Like","I Stay Home Most of the Time","I Feel Frustrated a Lot of the Time","Much Less Control Over What I Do","Rely Too Much on What Others Tell","I Need a Lot of Help From Others","Worry I'll Do Embarrassing Things","Rate Your Overall Health","Rate Your Eyesight Now","Difficulty Reading Small Print","Difficulty Figure Out Bill Accuracy","Difficulty Shaving or Styling Hair","Difficulty Recognizing People","Difficulty Taking Part in Sports","Difficulty Seeing Programs on TV","Difficulty Entertaining Friends","Do You Have More Help From Others","Limited in Kinds of Things Can Do","Often Irritable Because Eyesight","I Don't Go Out of My Home Alone"],["VFQ101","VFQ102","VFQ103","VFQ104","VFQ105","VFQ106","VFQ107","VFQ108","VFQ109","VFQ110","VFQ111","VFQ112","VFQ113","VFQ114","VFQ115","VFQ115A","VFQ115B","VFQ115C","VFQ116","VFQ116A","VFQ117","VFQ118","VFQ119","VFQ120","VFQ121","VFQ122","VFQ123","VFQ124","VFQ125","VFQ1A01","VFQ1A02","VFQ1A03","VFQ1A04","VFQ1A05","VFQ1A06","VFQ1A07","VFQ1A08","VFQ1A09","VFQ1A11A","VFQ1A11B","VFQ1A12","VFQ1A13"],["VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED"],["Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items","Original Items"],["general health","general vision","well-being/distress","ocular pain","near vision","near vision","near vision","distance vision","distance vision","peripheral vision","social fx","color vision","social fx","distance vision","driving (filter item)","driving (filter item)","driving (filter item)","driving","driving","driving","role limitations","role limitations","ocular pain","dependency","well-being/distress","well-being/distress","dependency","dependency","well-being/distress","general health","general vision","near vision","near vision","near vision","distance vision","distance vision","distance vision","social fx","role limitations","role limitations","well-being/distress","dependency"],["General Health","General Vision","Vision Specific: Mental Health","Ocular Pain","Near Activities","Near Activities","Near Activities","Distance Activities","Distance Activities","Peripheral Vision","Vision Specific: Social Functioning","Color Vision","Vision Specific: Social Functioning","Distance Activities",null,null,null,"Driving","Driving","Driving","Vision Specific: Role Difficulties","Vision Specific: Role Difficulties","Ocular Pain","Vision Specific: Dependency","Vision Specific: Mental Health","Vision Specific: Mental Health","Vision Specific: Dependency","Vision Specific: Dependency","Vision Specific: Mental Health","General Health","General Vision","Near Activities","Near Activities","Near Activities","Distance Activities","Distance Activities","Distance Activities","Vision Specific: Social Functioning","Vision Specific: Role Difficulties","Vision Specific: Role Difficulties","Vision Specific: Mental Health","Vision Specific: Dependency"],["Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>QSTESTCD<\/th>\n      <th>PARAM<\/th>\n      <th>PARAMCD<\/th>\n      <th>PARCAT1<\/th>\n      <th>PARCAT2<\/th>\n      <th>PARCAT3<\/th>\n      <th>PARCAT4<\/th>\n      <th>PARCAT5<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":[],"visible":false},{"name":"QSTESTCD","targets":0},{"name":"PARAM","targets":1},{"name":"PARAMCD","targets":2},{"name":"PARCAT1","targets":3},{"name":"PARCAT2","targets":4},{"name":"PARCAT3","targets":5},{"name":"PARCAT4","targets":6},{"name":"PARCAT5","targets":7}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level5">
<h5 id="transformed-records-param_lookup_transformed">Transformed Records (<code>param_lookup_transformed</code>)<a class="anchor" aria-label="anchor" href="#transformed-records-param_lookup_transformed"></a>
</h5>
<div id="htmlwidget-e5c8c404fe174e4c81bd" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Transformed - Accomplish Less Than You Would Like&quot;,&quot;Transformed - Difficulty Doing Work/Hobbies&quot;,&quot;Transformed - Difficulty Driving at Night&quot;,&quot;Transformed - Difficulty Entertaining Friends&quot;,&quot;Transformed - Difficulty Figure Out Bill Accuracy&quot;,&quot;Transformed - Difficulty Finding on Crowded Shelf&quot;,&quot;Transformed - Difficulty Going Down Step at Night&quot;,&quot;Transformed - Difficulty Going Out to See Movies&quot;,&quot;Transformed - Difficulty Noticing Objects to Side&quot;,&quot;Transformed - Difficulty Picking Out Own Clothes&quot;,&quot;Transformed - Difficulty Reading Newspapers&quot;,&quot;Transformed - Difficulty Reading Small Print&quot;,&quot;Transformed - Difficulty Reading Street Signs&quot;,&quot;Transformed - Difficulty Recognizing People&quot;,&quot;Transformed - Difficulty Seeing How People React&quot;,&quot;Transformed - Difficulty Seeing Programs on TV&quot;,&quot;Transformed - Difficulty Shaving or Styling Hair&quot;,&quot;Transformed - Difficulty Taking Part in Sports&quot;,&quot;Transformed - Difficulty Visiting With People&quot;,&quot;Transformed - Do You Have More Help From Others&quot;,&quot;Transformed - Driving in Difficult Conditions&quot;,&quot;Transformed - Eye Pain Keep From Doing What Like&quot;,&quot;Transformed - Eyesight Using Both Eyes Is&quot;,&quot;Transformed - How Much Pain in and Around Eyes&quot;,&quot;Transformed - How Often You Worry About Eyesight&quot;,&quot;Transformed - I Don&#39;t Go Out of My Home Alone&quot;,&quot;Transformed - I Feel Frustrated a Lot of the Time&quot;,&quot;Transformed - I Need a Lot of Help From Others&quot;,&quot;Transformed - I Stay Home Most of the Time&quot;,&quot;Transformed - Limited in How Long You Can Work&quot;,&quot;Transformed - Limited in Kinds of Things Can Do&quot;,&quot;Transformed - Main Reason You Gave Up Driving&quot;,&quot;Transformed - Much Less Control Over What I Do&quot;,&quot;Transformed - Often Irritable Because Eyesight&quot;,&quot;Transformed - Rate Your Eyesight Now&quot;,&quot;Transformed - Rate Your Overall Health&quot;,&quot;Transformed - Rely Too Much on What Others Tell&quot;,&quot;Transformed - Worry I&#39;ll Do Embarrassing Things&quot;,&quot;Transformed - Your Overall Health Is&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;QR01&quot;,&quot;QR02&quot;,&quot;QR03&quot;,&quot;QR04&quot;,&quot;QR05&quot;,&quot;QR06&quot;,&quot;QR07&quot;,&quot;QR08&quot;,&quot;QR09&quot;,&quot;QR10&quot;,&quot;QR11&quot;,&quot;QR12&quot;,&quot;QR13&quot;,&quot;QR14&quot;,&quot;QR15C&quot;,&quot;QR16&quot;,&quot;QR16A&quot;,&quot;QR17&quot;,&quot;QR18&quot;,&quot;QR19&quot;,&quot;QR1A11A&quot;,&quot;QR1A11B&quot;,&quot;QR1A12&quot;,&quot;QR1A13&quot;,&quot;QR20&quot;,&quot;QR21&quot;,&quot;QR22&quot;,&quot;QR23&quot;,&quot;QR24&quot;,&quot;QR25&quot;,&quot;QRA01&quot;,&quot;QRA02&quot;,&quot;QRA03&quot;,&quot;QRA04&quot;,&quot;QRA05&quot;,&quot;QRA06&quot;,&quot;QRA07&quot;,&quot;QRA08&quot;,&quot;QRA09&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;VFQ-25 INTERVIEWER ADMINISTERED&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Transformed - Original Items&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;color vision&quot;,&quot;dependency&quot;,&quot;distance vision&quot;,&quot;driving&quot;,&quot;general health&quot;,&quot;general vision&quot;,&quot;near vision&quot;,&quot;ocular pain&quot;,&quot;peripheral vision&quot;,&quot;role limitations&quot;,&quot;social fx&quot;,&quot;well-being/distress&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Color Vision&quot;,&quot;Distance Activities&quot;,&quot;Driving&quot;,&quot;General Health&quot;,&quot;General Vision&quot;,&quot;Near Activities&quot;,&quot;Ocular Pain&quot;,&quot;Peripheral Vision&quot;,&quot;Vision Specific: Dependency&quot;,&quot;Vision Specific: Mental Health&quot;,&quot;Vision Specific: Role Difficulties&quot;,&quot;Vision Specific: Social Functioning&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Base Item&quot;,&quot;Optional Item&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["Transformed - Your Overall Health Is","Transformed - Eyesight Using Both Eyes Is","Transformed - How Often You Worry About Eyesight","Transformed - How Much Pain in and Around Eyes","Transformed - Difficulty Reading Newspapers","Transformed - Difficulty Doing Work/Hobbies","Transformed - Difficulty Finding on Crowded Shelf","Transformed - Difficulty Reading Street Signs","Transformed - Difficulty Going Down Step at Night","Transformed - Difficulty Noticing Objects to Side","Transformed - Difficulty Seeing How People React","Transformed - Difficulty Picking Out Own Clothes","Transformed - Difficulty Visiting With People","Transformed - Difficulty Going Out to See Movies","Transformed - Main Reason You Gave Up Driving","Transformed - Difficulty Driving at Night","Transformed - Driving in Difficult Conditions","Transformed - Accomplish Less Than You Would Like","Transformed - Limited in How Long You Can Work","Transformed - Eye Pain Keep From Doing What Like","Transformed - I Stay Home Most of the Time","Transformed - I Feel Frustrated a Lot of the Time","Transformed - Much Less Control Over What I Do","Transformed - Rely Too Much on What Others Tell","Transformed - I Need a Lot of Help From Others","Transformed - Worry I'll Do Embarrassing Things","Transformed - Rate Your Overall Health","Transformed - Rate Your Eyesight Now","Transformed - Difficulty Reading Small Print","Transformed - Difficulty Figure Out Bill Accuracy","Transformed - Difficulty Shaving or Styling Hair","Transformed - Difficulty Recognizing People","Transformed - Difficulty Taking Part in Sports","Transformed - Difficulty Seeing Programs on TV","Transformed - Difficulty Entertaining Friends","Transformed - Do You Have More Help From Others","Transformed - Limited in Kinds of Things Can Do","Transformed - Often Irritable Because Eyesight","Transformed - I Don't Go Out of My Home Alone"],["QR01","QR02","QR03","QR04","QR05","QR06","QR07","QR08","QR09","QR10","QR11","QR12","QR13","QR14","QR15C","QR16","QR16A","QR17","QR18","QR19","QR20","QR21","QR22","QR23","QR24","QR25","QRA01","QRA02","QRA03","QRA04","QRA05","QRA06","QRA07","QRA08","QRA09","QR1A11A","QR1A11B","QR1A12","QR1A13"],["VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED"],["Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items","Transformed - Original Items"],["general health","general vision","well-being/distress","ocular pain","near vision","near vision","near vision","distance vision","distance vision","peripheral vision","social fx","color vision","social fx","distance vision","driving","driving","driving","role limitations","role limitations","ocular pain","dependency","well-being/distress","well-being/distress","dependency","dependency","well-being/distress","general health","general vision","near vision","near vision","near vision","distance vision","distance vision","distance vision","social fx","role limitations","role limitations","well-being/distress","dependency"],["General Health","General Vision","Vision Specific: Mental Health","Ocular Pain","Near Activities","Near Activities","Near Activities","Distance Activities","Distance Activities","Peripheral Vision","Vision Specific: Social Functioning","Color Vision","Vision Specific: Social Functioning","Distance Activities","Driving","Driving","Driving","Vision Specific: Role Difficulties","Vision Specific: Role Difficulties","Ocular Pain","Vision Specific: Dependency","Vision Specific: Mental Health","Vision Specific: Mental Health","Vision Specific: Dependency","Vision Specific: Dependency","Vision Specific: Mental Health","General Health","General Vision","Near Activities","Near Activities","Near Activities","Distance Activities","Distance Activities","Distance Activities","Vision Specific: Social Functioning","Vision Specific: Role Difficulties","Vision Specific: Role Difficulties","Vision Specific: Mental Health","Vision Specific: Dependency"],["Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Base Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item","Optional Item"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>PARAM<\/th>\n      <th>PARAMCD<\/th>\n      <th>PARCAT1<\/th>\n      <th>PARCAT2<\/th>\n      <th>PARCAT3<\/th>\n      <th>PARCAT4<\/th>\n      <th>PARCAT5<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":[],"visible":false},{"name":"PARAM","targets":0},{"name":"PARAMCD","targets":1},{"name":"PARCAT1","targets":2},{"name":"PARCAT2","targets":3},{"name":"PARCAT3","targets":4},{"name":"PARCAT4","targets":5},{"name":"PARCAT5","targets":6}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level5">
<h5 id="composite-records-param_lookup_composite">Composite Records (<code>param_lookup_composite</code>)<a class="anchor" aria-label="anchor" href="#composite-records-param_lookup_composite"></a>
</h5>
<div id="htmlwidget-36aa3d2a04d42bbc2145" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Color Vision Score&quot;,&quot;Color Vision Score (incl. Optional Items)&quot;,&quot;Composite Score&quot;,&quot;Composite Score (incl. Optional Items)&quot;,&quot;Distance Activities Score&quot;,&quot;Distance Activities Score (incl. Optional Items)&quot;,&quot;Driving Score&quot;,&quot;Driving Score (incl. Optional Items)&quot;,&quot;General Health Score&quot;,&quot;General Health Score (incl. Optional Items)&quot;,&quot;General Vision Score&quot;,&quot;General Vision Score (incl. Optional Items)&quot;,&quot;Near Activities Score&quot;,&quot;Near Activities Score (incl. Optional Items)&quot;,&quot;Ocular Pain Score&quot;,&quot;Ocular Pain Score (incl. Optional Items)&quot;,&quot;Peripheral Vision Score&quot;,&quot;Peripheral Vision Score (incl. Optional Items)&quot;,&quot;Vision Specific: Dependency Score&quot;,&quot;Vision Specific: Dependency Score (incl. Optional Items)&quot;,&quot;Vision Specific: Mental Health Score&quot;,&quot;Vision Specific: Mental Health Score (incl. Optional Items)&quot;,&quot;Vision Specific: Role Difficulties Score&quot;,&quot;Vision Specific: Role Difficulties Score (incl. Optional Items)&quot;,&quot;Vision Specific: Social Functioning Score&quot;,&quot;Vision Specific: Social Functioning Score (incl. Optional Items)&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;QBCSCORE&quot;,&quot;QOCSCORE&quot;,&quot;QSBCV&quot;,&quot;QSBDA&quot;,&quot;QSBDP&quot;,&quot;QSBDR&quot;,&quot;QSBGH&quot;,&quot;QSBGV&quot;,&quot;QSBMH&quot;,&quot;QSBNA&quot;,&quot;QSBOP&quot;,&quot;QSBPV&quot;,&quot;QSBRD&quot;,&quot;QSBSF&quot;,&quot;QSOCV&quot;,&quot;QSODA&quot;,&quot;QSODP&quot;,&quot;QSODR&quot;,&quot;QSOGH&quot;,&quot;QSOGV&quot;,&quot;QSOMH&quot;,&quot;QSONA&quot;,&quot;QSOOP&quot;,&quot;QSOPV&quot;,&quot;QSORD&quot;,&quot;QSOSF&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;VFQ-25 INTERVIEWER ADMINISTERED&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Derived Scale&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Color Vision&quot;,&quot;Composite Score&quot;,&quot;Distance Activities&quot;,&quot;Driving&quot;,&quot;General Health&quot;,&quot;General Vision&quot;,&quot;Near Activities&quot;,&quot;Ocular Pain&quot;,&quot;Peripheral Vision&quot;,&quot;Vision Specific: Dependency&quot;,&quot;Vision Specific: Mental Health&quot;,&quot;Vision Specific: Role Difficulties&quot;,&quot;Vision Specific: Social Functioning&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;VFQ-25&quot;,&quot;VFQ-39&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["General Health Score","General Vision Score","Near Activities Score","Distance Activities Score","Vision Specific: Social Functioning Score","Color Vision Score","Peripheral Vision Score","Driving Score","Vision Specific: Role Difficulties Score","Ocular Pain Score","Vision Specific: Dependency Score","Vision Specific: Mental Health Score","General Health Score (incl. Optional Items)","General Vision Score (incl. Optional Items)","Near Activities Score (incl. Optional Items)","Distance Activities Score (incl. Optional Items)","Vision Specific: Social Functioning Score (incl. Optional Items)","Color Vision Score (incl. Optional Items)","Peripheral Vision Score (incl. Optional Items)","Driving Score (incl. Optional Items)","Vision Specific: Role Difficulties Score (incl. Optional Items)","Ocular Pain Score (incl. Optional Items)","Vision Specific: Dependency Score (incl. Optional Items)","Vision Specific: Mental Health Score (incl. Optional Items)","Composite Score","Composite Score (incl. Optional Items)"],["QSBGH","QSBGV","QSBNA","QSBDA","QSBSF","QSBCV","QSBPV","QSBDR","QSBRD","QSBOP","QSBDP","QSBMH","QSOGH","QSOGV","QSONA","QSODA","QSOSF","QSOCV","QSOPV","QSODR","QSORD","QSOOP","QSODP","QSOMH","QBCSCORE","QOCSCORE"],["VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED","VFQ-25 INTERVIEWER ADMINISTERED"],["Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale","Derived Scale"],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],["General Health","General Vision","Near Activities","Distance Activities","Vision Specific: Social Functioning","Color Vision","Peripheral Vision","Driving","Vision Specific: Role Difficulties","Ocular Pain","Vision Specific: Dependency","Vision Specific: Mental Health","General Health","General Vision","Near Activities","Distance Activities","Vision Specific: Social Functioning","Color Vision","Peripheral Vision","Driving","Vision Specific: Role Difficulties","Ocular Pain","Vision Specific: Dependency","Vision Specific: Mental Health","Composite Score","Composite Score"],["VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-25","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-39","VFQ-25","VFQ-39"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>PARAM<\/th>\n      <th>PARAMCD<\/th>\n      <th>PARCAT1<\/th>\n      <th>PARCAT2<\/th>\n      <th>PARCAT3<\/th>\n      <th>PARCAT4<\/th>\n      <th>PARCAT5<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":[],"visible":false},{"name":"PARAM","targets":0},{"name":"PARAMCD","targets":1},{"name":"PARCAT1","targets":2},{"name":"PARCAT2","targets":3},{"name":"PARCAT3","targets":4},{"name":"PARCAT4","targets":5},{"name":"PARCAT5","targets":6}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level3">
<h3 id="mapping_raw">Initial Set Up and Mapping the Raw Records<a class="anchor" aria-label="anchor" href="#mapping_raw"></a>
</h3>
<p>We can now start setting up ADVFQ by taking <code>qs</code> and
merging on some ADSL variables which are needed for BDS derivations
later down the line. Note that there is no need to merge on the whole
ADSL dataset immediately as in so doing we would be needlessly
increasing the size of the working dataset; the rest of the variables
can be merged on at the end.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">adsl_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">TRTSDT</span>, <span class="va">TRTEDT</span>, <span class="va">TRT01A</span>, <span class="va">TRT01P</span><span class="op">)</span></span>
<span></span>
<span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="va">qs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_merged.html">derive_vars_merged</a></span><span class="op">(</span></span>
<span>    dataset_add <span class="op">=</span> <span class="va">adsl</span>,</span>
<span>    new_vars <span class="op">=</span> <span class="va">adsl_vars</span>,</span>
<span>    by_vars <span class="op">=</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/get_admiral_option.html">get_admiral_option</a></span><span class="op">(</span><span class="st">"subject_keys"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Now we can derive the analysis date (<code>ADT</code>) and analysis
relative day (<code>ADY</code>) variables. These derivations are
study-specific and so the ones below are just examples - the user is
again invited to consult the vignette on <a href="https://pharmaverse.github.io/admiral/articles/bds_finding.html" class="external-link">creating
a BDS dataset from SDTM</a> for details on this topic.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="va">advfq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_dt.html">derive_vars_dt</a></span><span class="op">(</span></span>
<span>    new_vars_prefix <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>    dtc <span class="op">=</span> <span class="va">QSDTC</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_dy.html">derive_vars_dy</a></span><span class="op">(</span></span>
<span>    reference_date <span class="op">=</span> <span class="va">TRTSDT</span>,</span>
<span>    source_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">ADT</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Next, we can assign <code>PARAMCD</code> for the original parameters
by merging with the <code>param_lookup_original</code> table we set up
earlier. Using <code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_merged_lookup.html">derive_vars_merged_lookup()</a></code> allows us to get
console-level feedback that all the <code>QSTESTCD</code>s have been
mapped. We only add <code>PARAMCD</code> for now, and will derive
<code>PARCATy</code> and <code>PARAM</code> later - again to avoid
carrying forward too many variables.</p>
<p>We can also derive <code>AVAL</code>, <code>AVALC</code> and
<code>BASETYPE</code> for the original records with a simple
<code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> statement, and then <code>AVISIT</code> and
<code>AVISITN</code> with study-specific logic.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="va">advfq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co">## Add PARAMCD for original parameters only - PARCATy and PARAM will be added later</span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_merged_lookup.html">derive_vars_merged_lookup</a></span><span class="op">(</span></span>
<span>    dataset_add <span class="op">=</span> <span class="va">param_lookup_original</span>,</span>
<span>    new_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARAMCD</span><span class="op">)</span>,</span>
<span>    by_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">QSTESTCD</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    AVAL <span class="op">=</span> <span class="va">QSSTRESN</span>,</span>
<span>    AVALC <span class="op">=</span> <span class="va">QSORRES</span>,</span>
<span>    BASETYPE <span class="op">=</span> <span class="st">"LAST PERIOD 01"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    AVISIT <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">VISIT</span><span class="op">)</span> <span class="op">~</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html" class="external-link">str_to_title</a></span><span class="op">(</span><span class="va">VISIT</span><span class="op">)</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span></span>
<span>    <span class="op">)</span>,</span>
<span>    AVISITN <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">AVISIT</span> <span class="op">==</span> <span class="st">"Baseline"</span> <span class="op">~</span> <span class="fl">1</span>,</span>
<span>      <span class="va">AVISIT</span> <span class="op">==</span> <span class="st">"Week 12"</span> <span class="op">~</span> <span class="fl">12</span>,</span>
<span>      <span class="va">AVISIT</span> <span class="op">==</span> <span class="st">"Week 24"</span> <span class="op">~</span> <span class="fl">24</span>,</span>
<span>      <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span>,</span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; All `QSTESTCD` are mapped.</span></span></code></pre></div>
<p>Here’s what the data for the “Near Activities” and “Distance
Activities” questions looks like for one patient’s first two visits:</p>
<div id="htmlwidget-febe03efa1a2d8d52a86" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;CDISCPILOT01&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;QS&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;01-701-1034&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"77\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;VFQ105&quot;,&quot;VFQ106&quot;,&quot;VFQ107&quot;,&quot;VFQ108&quot;,&quot;VFQ109&quot;,&quot;VFQ114&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Difficulty Doing Work/Hobbies&quot;,&quot;Difficulty Finding on Crowded Shelf&quot;,&quot;Difficulty Going Down Step at Night&quot;,&quot;Difficulty Going Out to See Movies&quot;,&quot;Difficulty Reading Newspapers&quot;,&quot;Difficulty Reading Street Signs&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;NEI VFQ-25&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Original Response&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;NO DIFFICULTY&quot;,&quot;SOME DIFFICULTY&quot;,&quot;VERY DIFFICULT&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;NO DIFFICULTY&quot;,&quot;SOME DIFFICULTY&quot;,&quot;VERY DIFFICULT&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"3\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Y&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"3\" data-max=\"12\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;BASELINE&quot;,&quot;WEEK 12&quot;,&quot;WEEK 24&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"168\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;2014-07-01&quot;,&quot;2014-09-25&quot;,&quot;2014-12-17&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"170\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"0\" data-max=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Xanomeline High Dose&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Xanomeline High Dose&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"date\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1404172800000\" data-max=\"1418774400000\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"170\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;VFQ105&quot;,&quot;VFQ106&quot;,&quot;VFQ107&quot;,&quot;VFQ108&quot;,&quot;VFQ109&quot;,&quot;VFQ114&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"3\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;NO DIFFICULTY&quot;,&quot;SOME DIFFICULTY&quot;,&quot;VERY DIFFICULT&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;LAST PERIOD 01&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Baseline&quot;,&quot;Week 12&quot;,&quot;Week 24&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"1\" data-max=\"24\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01","CDISCPILOT01"],["QS","QS","QS","QS","QS","QS","QS","QS","QS","QS","QS","QS","QS","QS","QS","QS","QS","QS"],["01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034"],[3,1,9,21,20,14,37,30,34,46,45,39,61,59,65,77,76,70],["VFQ105","VFQ106","VFQ107","VFQ108","VFQ109","VFQ114","VFQ105","VFQ106","VFQ107","VFQ108","VFQ109","VFQ114","VFQ105","VFQ106","VFQ107","VFQ108","VFQ109","VFQ114"],["Difficulty Reading Newspapers","Difficulty Doing Work/Hobbies","Difficulty Finding on Crowded Shelf","Difficulty Reading Street Signs","Difficulty Going Down Step at Night","Difficulty Going Out to See Movies","Difficulty Reading Newspapers","Difficulty Doing Work/Hobbies","Difficulty Finding on Crowded Shelf","Difficulty Reading Street Signs","Difficulty Going Down Step at Night","Difficulty Going Out to See Movies","Difficulty Reading Newspapers","Difficulty Doing Work/Hobbies","Difficulty Finding on Crowded Shelf","Difficulty Reading Street Signs","Difficulty Going Down Step at Night","Difficulty Going Out to See Movies"],["NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25","NEI VFQ-25"],["Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response","Original Response"],["NO DIFFICULTY","VERY DIFFICULT","SOME DIFFICULTY","SOME DIFFICULTY","SOME DIFFICULTY","NO DIFFICULTY","VERY DIFFICULT","VERY DIFFICULT","SOME DIFFICULTY","SOME DIFFICULTY","VERY DIFFICULT","NO DIFFICULTY","SOME DIFFICULTY","VERY DIFFICULT","SOME DIFFICULTY","NO DIFFICULTY","NO DIFFICULTY","NO DIFFICULTY"],["","","","","","","","","","","","","","","","","",""],["NO DIFFICULTY","VERY DIFFICULT","SOME DIFFICULTY","SOME DIFFICULTY","SOME DIFFICULTY","NO DIFFICULTY","VERY DIFFICULT","VERY DIFFICULT","SOME DIFFICULTY","SOME DIFFICULTY","VERY DIFFICULT","NO DIFFICULTY","SOME DIFFICULTY","VERY DIFFICULT","SOME DIFFICULTY","NO DIFFICULTY","NO DIFFICULTY","NO DIFFICULTY"],[1,2,2,2,2,1,3,2,2,2,3,1,2,2,2,1,1,1],["","","","","","","","","","","","","","","","","",""],["Y","Y","Y","Y","Y","Y",null,null,null,null,null,null,null,null,null,null,null,null],["","","","","","","","","","","","","","","","","",""],[3,3,3,3,3,3,9,9,9,9,9,9,12,12,12,12,12,12],["BASELINE","BASELINE","BASELINE","BASELINE","BASELINE","BASELINE","WEEK 12","WEEK 12","WEEK 12","WEEK 12","WEEK 12","WEEK 12","WEEK 24","WEEK 24","WEEK 24","WEEK 24","WEEK 24","WEEK 24"],[1,1,1,1,1,1,84,84,84,84,84,84,168,168,168,168,168,168],["2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-09-25","2014-09-25","2014-09-25","2014-09-25","2014-09-25","2014-09-25","2014-12-17","2014-12-17","2014-12-17","2014-12-17","2014-12-17","2014-12-17"],[1,1,1,1,1,1,87,87,87,87,87,87,170,170,170,170,170,170],["2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01"],["2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30","2014-12-30"],["Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose"],["Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose","Xanomeline High Dose"],["2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-07-01","2014-09-25","2014-09-25","2014-09-25","2014-09-25","2014-09-25","2014-09-25","2014-12-17","2014-12-17","2014-12-17","2014-12-17","2014-12-17","2014-12-17"],[1,1,1,1,1,1,87,87,87,87,87,87,170,170,170,170,170,170],["VFQ105","VFQ106","VFQ107","VFQ108","VFQ109","VFQ114","VFQ105","VFQ106","VFQ107","VFQ108","VFQ109","VFQ114","VFQ105","VFQ106","VFQ107","VFQ108","VFQ109","VFQ114"],[1,2,2,2,2,1,3,2,2,2,3,1,2,2,2,1,1,1],["NO DIFFICULTY","VERY DIFFICULT","SOME DIFFICULTY","SOME DIFFICULTY","SOME DIFFICULTY","NO DIFFICULTY","VERY DIFFICULT","VERY DIFFICULT","SOME DIFFICULTY","SOME DIFFICULTY","VERY DIFFICULT","NO DIFFICULTY","SOME DIFFICULTY","VERY DIFFICULT","SOME DIFFICULTY","NO DIFFICULTY","NO DIFFICULTY","NO DIFFICULTY"],["LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01","LAST PERIOD 01"],["Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Week 12","Week 12","Week 12","Week 12","Week 12","Week 12","Week 24","Week 24","Week 24","Week 24","Week 24","Week 24"],[1,1,1,1,1,1,12,12,12,12,12,12,24,24,24,24,24,24]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>STUDYID<\/th>\n      <th>DOMAIN<\/th>\n      <th>USUBJID<\/th>\n      <th>QSSEQ<\/th>\n      <th>QSTESTCD<\/th>\n      <th>QSTEST<\/th>\n      <th>QSCAT<\/th>\n      <th>QSSCAT<\/th>\n      <th>QSORRES<\/th>\n      <th>QSORRESU<\/th>\n      <th>QSSTRESC<\/th>\n      <th>QSSTRESN<\/th>\n      <th>QSSTRESU<\/th>\n      <th>QSBLFL<\/th>\n      <th>QSDRVFL<\/th>\n      <th>VISITNUM<\/th>\n      <th>VISIT<\/th>\n      <th>VISITDY<\/th>\n      <th>QSDTC<\/th>\n      <th>QSDY<\/th>\n      <th>TRTSDT<\/th>\n      <th>TRTEDT<\/th>\n      <th>TRT01A<\/th>\n      <th>TRT01P<\/th>\n      <th>ADT<\/th>\n      <th>ADY<\/th>\n      <th>PARAMCD<\/th>\n      <th>AVAL<\/th>\n      <th>AVALC<\/th>\n      <th>BASETYPE<\/th>\n      <th>AVISIT<\/th>\n      <th>AVISITN<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":[0,1,3,4,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,29,31],"visible":false},{"className":"dt-right","targets":[3,11,15,17,19,25,27,31]},{"name":"STUDYID","targets":0},{"name":"DOMAIN","targets":1},{"name":"USUBJID","targets":2},{"name":"QSSEQ","targets":3},{"name":"QSTESTCD","targets":4},{"name":"QSTEST","targets":5},{"name":"QSCAT","targets":6},{"name":"QSSCAT","targets":7},{"name":"QSORRES","targets":8},{"name":"QSORRESU","targets":9},{"name":"QSSTRESC","targets":10},{"name":"QSSTRESN","targets":11},{"name":"QSSTRESU","targets":12},{"name":"QSBLFL","targets":13},{"name":"QSDRVFL","targets":14},{"name":"VISITNUM","targets":15},{"name":"VISIT","targets":16},{"name":"VISITDY","targets":17},{"name":"QSDTC","targets":18},{"name":"QSDY","targets":19},{"name":"TRTSDT","targets":20},{"name":"TRTEDT","targets":21},{"name":"TRT01A","targets":22},{"name":"TRT01P","targets":23},{"name":"ADT","targets":24},{"name":"ADY","targets":25},{"name":"PARAMCD","targets":26},{"name":"AVAL","targets":27},{"name":"AVALC","targets":28},{"name":"BASETYPE","targets":29},{"name":"AVISIT","targets":30},{"name":"AVISITN","targets":31}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="deriving_transformed">Deriving the Transformed Parameters<a class="anchor" aria-label="anchor" href="#deriving_transformed"></a>
</h3>
<p>Now we are ready to derive the transformed parameters. Excluding 15C
(see later down this section), all of these are derived by re-scaling a
single original record. As such, the prototypical code which can be used
to derive them is a call to <code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_extreme_records.html">derive_extreme_records()</a></code> which
is structured as follows:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_extreme_records.html">derive_extreme_records</a></span><span class="op">(</span></span>
<span>  dataset <span class="op">=</span> <span class="va">advfq</span>,</span>
<span>  dataset_add <span class="op">=</span> <span class="va">advfq</span>,</span>
<span>  filter_add <span class="op">=</span> <span class="va">QSTESTCD</span> <span class="op">==</span> <span class="st">"VFQ1xx"</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>  set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>    AVAL <span class="op">=</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/transform_range.html">transform_range</a></span><span class="op">(</span></span>
<span>      source <span class="op">=</span> <span class="va">AVAL</span>,</span>
<span>      source_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, <span class="co"># or some other range, e.g. c(1, 6), depending on the parameter</span></span>
<span>      target_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>      flip_direction <span class="op">=</span> <span class="cn">TRUE</span> <span class="co"># or FALSE, depending on the parameter</span></span>
<span>    <span class="op">)</span>,</span>
<span>    PARAMCD <span class="op">=</span> <span class="st">"QRxx"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The function <code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/transform_range.html">transform_range()</a></code> is a helper function from
<a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> which performs the re-scaling. You will need to
specify the <code>source_range</code> (i.e. the range of possible values
for the original record) and whether or not to
<code>flip_direction</code> (i.e. whether higher values of the original
record correspond to better or worse outcomes). Note that both the
<code>source_range</code> and <code>flip_direction</code> <em>will</em>
change across parameters - for instance, the source range is
<code>c(1, 5)</code> for <code>PARAMCD == "VFQ101"</code> but
<code>c(1, 6)</code> for <code>PARAMCD == "VFQ102"</code>. As such it is
useful to group all parameters (excluding 15C, for which a different
approach will be needed) based on which transformation they require; in
so doing the transformations for each group can be done together.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">range1to5_flip_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"VFQ101"</span>, <span class="st">"VFQ103"</span>, <span class="st">"VFQ104"</span>, <span class="st">"VFQ105"</span>, <span class="st">"VFQ106"</span>, <span class="st">"VFQ107"</span>, <span class="st">"VFQ108"</span>,</span>
<span>  <span class="st">"VFQ109"</span>, <span class="st">"VFQ110"</span>, <span class="st">"VFQ111"</span>, <span class="st">"VFQ112"</span>, <span class="st">"VFQ113"</span>, <span class="st">"VFQ114"</span>, <span class="st">"VFQ116"</span>,</span>
<span>  <span class="st">"VFQ116A"</span>, <span class="st">"VFQ1A03"</span>, <span class="st">"VFQ1A04"</span>, <span class="st">"VFQ1A05"</span>, <span class="st">"VFQ1A06"</span>, <span class="st">"VFQ1A07"</span>,</span>
<span>  <span class="st">"VFQ1A08"</span>, <span class="st">"VFQ1A09"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">range1to6_flip_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VFQ102"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">range1to5_noflip_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"VFQ117"</span>, <span class="st">"VFQ118"</span>, <span class="st">"VFQ119"</span>, <span class="st">"VFQ120"</span>, <span class="st">"VFQ121"</span>, <span class="st">"VFQ122"</span>, <span class="st">"VFQ123"</span>,</span>
<span>  <span class="st">"VFQ124"</span>, <span class="st">"VFQ125"</span>, <span class="st">"VFQ1A11A"</span>, <span class="st">"VFQ1A11B"</span>, <span class="st">"VFQ1A12"</span>, <span class="st">"VFQ1A13"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">range0to10_noflip_params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VFQ1A01"</span>, <span class="st">"VFQ1A02"</span><span class="op">)</span></span></code></pre></div>
<p>For question 15C we have to be a little more careful as the
derivation depends on whether or not question 15C was asked at that
visit. If it was, then we can derive the transformed record as normal.
However, if it wasn’t, then we have to check the response to question
15B - if the response to 15B indicates that the patient has never driven
or given up driving (i.e. <code>QSSTRESN == 1</code>), then we set the
transformed record to 0; otherwise, we do not derive a transformed
record for that visit. To do this, we can set up a temporary flag
variable using <code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_var_merged_exist_flag.html">derive_var_merged_exist_flag()</a></code> to identify
visits where question 15C was not asked, and then use that flag in the
derivation of the transformed record for 15C.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="va">advfq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_var_merged_exist_flag.html">derive_var_merged_exist_flag</a></span><span class="op">(</span></span>
<span>    dataset_add <span class="op">=</span> <span class="va">advfq</span>,</span>
<span>    by_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">adsl_vars</span>, <span class="va">ADT</span>, <span class="va">ADY</span><span class="op">)</span>,</span>
<span>    new_var <span class="op">=</span> <span class="va">TEMP_VFQ115C_FL</span>,</span>
<span>    condition <span class="op">=</span> <span class="va">QSTESTCD</span> <span class="op">==</span> <span class="st">"VFQ115C"</span>,</span>
<span>    true_value <span class="op">=</span> <span class="st">"Y"</span>,</span>
<span>    false_value <span class="op">=</span> <span class="st">"N"</span>,</span>
<span>    missing_value <span class="op">=</span> <span class="st">"M"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We can then derive the transformed records, including the special
handling for 15C, in a single call to <code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/call_derivation.html">call_derivation()</a></code>,
since each call to <code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_extreme_records.html">derive_extreme_records()</a></code> contains the
same assignment of <code>dataset</code>, <code>dataset_add</code> and
<code>keep_source_vars</code>, then only differs in the
<code>filter_add</code> and <code>set_values_to</code> arguments. Each
list passed to <code>variable_params</code> performs the transformation
for one of the groups of parameters set up above, including dynamical
generation of the <code>PARAMCD</code>, though 15C is done separately.
Note that we set <code>keep_source_vars = adsl_vars</code> to ensure
SDTM records do not get populated for derived parameters.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="va">advfq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/call_derivation.html">call_derivation</a></span><span class="op">(</span></span>
<span>    derivation <span class="op">=</span> <span class="va">derive_extreme_records</span>,</span>
<span>    dataset <span class="op">=</span> <span class="va">.</span>,</span>
<span>    dataset_add <span class="op">=</span> <span class="va">.</span>,</span>
<span>    keep_source_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/get_admiral_option.html">get_admiral_option</a></span><span class="op">(</span><span class="st">"subject_keys"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="va">AVISIT</span>, <span class="va">AVISITN</span>, <span class="va">ADT</span>, <span class="va">ADY</span><span class="op">)</span>,</span>
<span>      <span class="va">adsl_vars</span></span>
<span>    <span class="op">)</span>,</span>
<span>    variable_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/params.html">params</a></span><span class="op">(</span></span>
<span>        filter_add <span class="op">=</span> <span class="va">QSTESTCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">range1to5_flip_params</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>        set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>          AVAL <span class="op">=</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/transform_range.html">transform_range</a></span><span class="op">(</span></span>
<span>            source <span class="op">=</span> <span class="va">AVAL</span>,</span>
<span>            source_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>            target_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>            flip_direction <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>          <span class="op">)</span>,</span>
<span>          PARAMCD <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="va">QSTESTCD</span>, <span class="st">"VFQ1"</span>, <span class="st">"QR"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/params.html">params</a></span><span class="op">(</span></span>
<span>        filter_add <span class="op">=</span> <span class="va">QSTESTCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">range1to6_flip_params</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>        set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>          AVAL <span class="op">=</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/transform_range.html">transform_range</a></span><span class="op">(</span></span>
<span>            source <span class="op">=</span> <span class="va">AVAL</span>,</span>
<span>            source_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>            target_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>            flip_direction <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>          <span class="op">)</span>,</span>
<span>          PARAMCD <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="va">QSTESTCD</span>, <span class="st">"VFQ1"</span>, <span class="st">"QR"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/params.html">params</a></span><span class="op">(</span></span>
<span>        filter_add <span class="op">=</span> <span class="va">QSTESTCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">range1to5_noflip_params</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>        set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>          AVAL <span class="op">=</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/transform_range.html">transform_range</a></span><span class="op">(</span></span>
<span>            source <span class="op">=</span> <span class="va">AVAL</span>,</span>
<span>            source_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>            target_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>            flip_direction <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>          <span class="op">)</span>,</span>
<span>          PARAMCD <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="va">QSTESTCD</span>, <span class="st">"VFQ1"</span>, <span class="st">"QR"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/params.html">params</a></span><span class="op">(</span></span>
<span>        filter_add <span class="op">=</span> <span class="va">QSTESTCD</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">range0to10_noflip_params</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>        set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>          AVAL <span class="op">=</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/transform_range.html">transform_range</a></span><span class="op">(</span></span>
<span>            source <span class="op">=</span> <span class="va">AVAL</span>,</span>
<span>            source_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>            target_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>            flip_direction <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>          <span class="op">)</span>,</span>
<span>          PARAMCD <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace</a></span><span class="op">(</span><span class="va">QSTESTCD</span>, <span class="st">"VFQ1"</span>, <span class="st">"QR"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="co"># For QR15C, do it in two parts</span></span>
<span>      <span class="co"># first in the case where QSTESTCD == "VFQ115C" is present at that visit</span></span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/params.html">params</a></span><span class="op">(</span></span>
<span>        filter_add <span class="op">=</span> <span class="va">QSTESTCD</span> <span class="op">==</span> <span class="st">"VFQ115C"</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>        set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>          AVAL <span class="op">=</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/transform_range.html">transform_range</a></span><span class="op">(</span></span>
<span>            source <span class="op">=</span> <span class="va">AVAL</span>,</span>
<span>            source_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>            target_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>            flip_direction <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>          <span class="op">)</span>,</span>
<span>          PARAMCD <span class="op">=</span> <span class="st">"QR15C"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="co"># second in the case where QSTESTCD == "VFQ115C" is not present at that visit</span></span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/params.html">params</a></span><span class="op">(</span></span>
<span>        filter_add <span class="op">=</span> <span class="va">TEMP_VFQ115C_FL</span> <span class="op">==</span> <span class="st">"N"</span> <span class="op">&amp;</span> <span class="va">QSTESTCD</span> <span class="op">==</span> <span class="st">"VFQ115B"</span> <span class="op">&amp;</span> <span class="va">AVAL</span> <span class="op">==</span> <span class="fl">1</span>,</span>
<span>        set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>          AVAL <span class="op">=</span> <span class="fl">0</span>,</span>
<span>          PARAMCD <span class="op">=</span> <span class="st">"QR15C"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">TEMP_VFQ115C_FL</span><span class="op">)</span></span></code></pre></div>
<p>We can then add the <code>PARAM</code> and <code>PARCATy</code>
variables for both the original and transformed records by merging with
the relevant lookup tables.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="va">advfq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_merged_lookup.html">derive_vars_merged_lookup</a></span><span class="op">(</span></span>
<span>    dataset_add <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>      <span class="va">param_lookup_original</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">QSTESTCD</span><span class="op">)</span>,</span>
<span>      <span class="va">param_lookup_transformed</span></span>
<span>    <span class="op">)</span>,</span>
<span>    by_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARAMCD</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; All `PARAMCD` are mapped.</span></span></code></pre></div>
<p>Here’s what some of the transformed parameters and original records
look like alongside each other for one patient’s first two visits:</p>
<div id="htmlwidget-1fb4450895fe099f74a1" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;01-701-1034&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Baseline&quot;,&quot;Week 12&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Eye Pain Keep From Doing What Like&quot;,&quot;Eyesight Using Both Eyes Is&quot;,&quot;Transformed - Eye Pain Keep From Doing What Like&quot;,&quot;Transformed - Eyesight Using Both Eyes Is&quot;,&quot;Transformed - Your Overall Health Is&quot;,&quot;Your Overall Health Is&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;QR01&quot;,&quot;QR02&quot;,&quot;QR19&quot;,&quot;VFQ101&quot;,&quot;VFQ102&quot;,&quot;VFQ119&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"2\" data-max=\"80\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034"],["Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Week 12","Week 12","Week 12","Week 12","Week 12","Week 12"],["Transformed - Your Overall Health Is","Transformed - Eyesight Using Both Eyes Is","Transformed - Eye Pain Keep From Doing What Like","Your Overall Health Is","Eyesight Using Both Eyes Is","Eye Pain Keep From Doing What Like","Transformed - Your Overall Health Is","Transformed - Eyesight Using Both Eyes Is","Transformed - Eye Pain Keep From Doing What Like","Your Overall Health Is","Eyesight Using Both Eyes Is","Eye Pain Keep From Doing What Like"],["QR01","QR02","QR19","VFQ101","VFQ102","VFQ119","QR01","QR02","QR19","VFQ101","VFQ102","VFQ119"],[75,80,25,2,2,2,25,40,25,4,4,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>USUBJID<\/th>\n      <th>AVISIT<\/th>\n      <th>PARAM<\/th>\n      <th>PARAMCD<\/th>\n      <th>AVAL<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":[],"visible":false},{"className":"dt-right","targets":4},{"name":"USUBJID","targets":0},{"name":"AVISIT","targets":1},{"name":"PARAM","targets":2},{"name":"PARAMCD","targets":3},{"name":"AVAL","targets":4}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level3">
<h3 id="deriving_composite">Deriving the Composite Parameters<a class="anchor" aria-label="anchor" href="#deriving_composite"></a>
</h3>
<div class="section level4">
<h4 id="composite-scores-by-category">Composite Scores by Category<a class="anchor" aria-label="anchor" href="#composite-scores-by-category"></a>
</h4>
<p>With the now-derived transformed parameters (identifiable through
<code>PARCAT2 == "Transformed - Original Items"</code>), we have every
question measured on the same scale and can derive the composite
parameters. These are essentially just means across categories of
questions, with the category being determined by the contents of
<code>PARCAT4</code>. The VFQ guidelines dictate that for each category,
two different composite parameters should be derived: one including just
the Base items of the questionnaire
(<code>PARCAT5 == "Base Item"</code>) and the other one also including
any Optional items. As such, below we derive the composite parameters in
two stages, first constructing <code>advfq_qsb</code> for the Base
item-only composite means, and then <code>advfq_qso</code> for the means
including all items.</p>
<p>Note that the <code>dataset</code> argument is not passed to
<code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_summary_records.html">derive_summary_records()</a></code>, meaning the output datasets
contain only the new composite parameters. Also, this time we use
<code>PARCAT4</code> as a by-variable, meaning that the new composite
scores are assigned the same value of <code>PARCAT4</code>
(e.g. “Distance Activities”) as the records that were used to constitute
them. Then, we can then use <code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_merged_lookup.html">derive_vars_merged_lookup()</a></code> to
add on the <code>PARCATy</code> (excluding <code>PARCAT4</code>) and
<code>PARAM</code>/<code>PARAMCD</code> variables for these new records.
At the end, we append the new records to the existing <code>advfq</code>
using <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">advfq_qsb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_summary_records.html">derive_summary_records</a></span><span class="op">(</span></span>
<span>  dataset_add <span class="op">=</span> <span class="va">advfq</span>,</span>
<span>  filter_add <span class="op">=</span> <span class="va">PARCAT2</span> <span class="op">==</span> <span class="st">"Transformed - Original Items"</span> <span class="op">&amp;</span> <span class="va">PARCAT5</span> <span class="op">==</span> <span class="st">"Base Item"</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>  by_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/get_admiral_option.html">get_admiral_option</a></span><span class="op">(</span><span class="st">"subject_keys"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">adsl_vars</span>, <span class="va">AVISIT</span>, <span class="va">AVISITN</span>, <span class="va">ADT</span>, <span class="va">ADY</span>, <span class="va">PARCAT4</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span>AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_merged_lookup.html">derive_vars_merged_lookup</a></span><span class="op">(</span></span>
<span>    dataset_add <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">param_lookup_composite</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_starts.html" class="external-link">str_starts</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="st">"QSB"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    new_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="va">PARAM</span>, <span class="va">PARCAT1</span>, <span class="va">PARCAT2</span>, <span class="va">PARCAT3</span>, <span class="va">PARCAT5</span><span class="op">)</span>,</span>
<span>    by_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARCAT4</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; All `PARCAT4` are mapped.</span></span>
<span></span>
<span><span class="va">advfq_qso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_summary_records.html">derive_summary_records</a></span><span class="op">(</span></span>
<span>  dataset_add <span class="op">=</span> <span class="va">advfq</span>,</span>
<span>  filter_add <span class="op">=</span> <span class="va">PARCAT2</span> <span class="op">==</span> <span class="st">"Transformed - Original Items"</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>  by_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/get_admiral_option.html">get_admiral_option</a></span><span class="op">(</span><span class="st">"subject_keys"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">adsl_vars</span>, <span class="va">AVISIT</span>, <span class="va">AVISITN</span>, <span class="va">ADT</span>, <span class="va">ADY</span>, <span class="va">PARCAT4</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span>AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_merged_lookup.html">derive_vars_merged_lookup</a></span><span class="op">(</span></span>
<span>    dataset_add <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">param_lookup_composite</span>, <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_starts.html" class="external-link">str_starts</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="st">"QSO"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    new_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="va">PARAM</span>, <span class="va">PARCAT1</span>, <span class="va">PARCAT2</span>, <span class="va">PARCAT3</span>, <span class="va">PARCAT5</span><span class="op">)</span>,</span>
<span>    by_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARCAT4</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; All `PARCAT4` are mapped.</span></span>
<span></span>
<span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">advfq</span>, <span class="va">advfq_qsb</span>, <span class="va">advfq_qso</span><span class="op">)</span></span></code></pre></div>
<p>Here’s what the Base item composite scores by category look like for
the “Near Activities” and “Distance Activities” categories for one
patient’s first two visits:</p>
<div id="htmlwidget-10b3b7155e8045a1b2ad" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-10b3b7155e8045a1b2ad">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;01-701-1034&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Baseline&quot;,&quot;Week 12&quot;,&quot;Week 24&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Distance Activities Score&quot;,&quot;Near Activities Score&quot;,&quot;Transformed - Difficulty Doing Work/Hobbies&quot;,&quot;Transformed - Difficulty Finding on Crowded Shelf&quot;,&quot;Transformed - Difficulty Going Down Step at Night&quot;,&quot;Transformed - Difficulty Going Out to See Movies&quot;,&quot;Transformed - Difficulty Reading Newspapers&quot;,&quot;Transformed - Difficulty Reading Street Signs&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;QR05&quot;,&quot;QR06&quot;,&quot;QR07&quot;,&quot;QR08&quot;,&quot;QR09&quot;,&quot;QR14&quot;,&quot;QSBDA&quot;,&quot;QSBNA&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Distance Activities&quot;,&quot;Near Activities&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"50\" data-max=\"100\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034"],["Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Week 12","Week 12","Week 12","Week 12","Week 12","Week 12","Week 12","Week 12","Week 24","Week 24","Week 24","Week 24","Week 24","Week 24","Week 24","Week 24"],["Transformed - Difficulty Reading Newspapers","Transformed - Difficulty Doing Work/Hobbies","Transformed - Difficulty Finding on Crowded Shelf","Transformed - Difficulty Reading Street Signs","Transformed - Difficulty Going Down Step at Night","Transformed - Difficulty Going Out to See Movies","Distance Activities Score","Near Activities Score","Transformed - Difficulty Reading Newspapers","Transformed - Difficulty Doing Work/Hobbies","Transformed - Difficulty Finding on Crowded Shelf","Transformed - Difficulty Reading Street Signs","Transformed - Difficulty Going Down Step at Night","Transformed - Difficulty Going Out to See Movies","Distance Activities Score","Near Activities Score","Transformed - Difficulty Reading Newspapers","Transformed - Difficulty Doing Work/Hobbies","Transformed - Difficulty Finding on Crowded Shelf","Transformed - Difficulty Reading Street Signs","Transformed - Difficulty Going Down Step at Night","Transformed - Difficulty Going Out to See Movies","Distance Activities Score","Near Activities Score"],["QR05","QR06","QR07","QR08","QR09","QR14","QSBDA","QSBNA","QR05","QR06","QR07","QR08","QR09","QR14","QSBDA","QSBNA","QR05","QR06","QR07","QR08","QR09","QR14","QSBDA","QSBNA"],["Near Activities","Near Activities","Near Activities","Distance Activities","Distance Activities","Distance Activities","Distance Activities","Near Activities","Near Activities","Near Activities","Near Activities","Distance Activities","Distance Activities","Distance Activities","Distance Activities","Near Activities","Near Activities","Near Activities","Near Activities","Distance Activities","Distance Activities","Distance Activities","Distance Activities","Near Activities"],[100,75,75,75,75,100,83.33333333333333,83.33333333333333,50,75,75,75,50,100,75,66.66666666666667,75,75,75,100,100,100,100,75]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>USUBJID<\/th>\n      <th>AVISIT<\/th>\n      <th>PARAM<\/th>\n      <th>PARAMCD<\/th>\n      <th>PARCAT4<\/th>\n      <th>AVAL<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":[],"visible":false},{"className":"dt-right","targets":5},{"name":"USUBJID","targets":0},{"name":"AVISIT","targets":1},{"name":"PARAM","targets":2},{"name":"PARAMCD","targets":3},{"name":"PARCAT4","targets":4},{"name":"AVAL","targets":5}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level4">
<h4 id="overall-composite-scores">Overall Composite Scores<a class="anchor" aria-label="anchor" href="#overall-composite-scores"></a>
</h4>
<p>Finally, for the overall composite scores, we take all the
newly-derived composite parameters, excluding “General Health”, and
create:</p>
<ul>
<li>An averaged record (<code>PARAMCD == "QBCSCORE"</code>) using the
composite scores that were calculated with Base items only;</li>
<li>An averaged record (<code>PARAMCD == "QOCSCORE"</code>) using the
composite scores that were calculated with Base and Optional items.</li>
</ul>
<p>As was done for the <a href="#deriving_transformed">transformed
parameters</a>, we do this in a single call to
<code><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/call_derivation.html">call_derivation()</a></code>, since the only difference between the
two derivations is the <code>filter_add</code> and
<code>set_values_to</code> arguments.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="va">advfq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/call_derivation.html">call_derivation</a></span><span class="op">(</span></span>
<span>    derivation <span class="op">=</span> <span class="va">derive_summary_records</span>,</span>
<span>    dataset_add <span class="op">=</span> <span class="va">advfq</span>,</span>
<span>    by_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/get_admiral_option.html">get_admiral_option</a></span><span class="op">(</span><span class="st">"subject_keys"</span><span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span><span class="va">adsl_vars</span>, <span class="va">AVISIT</span>, <span class="va">AVISITN</span>, <span class="va">ADT</span>, <span class="va">ADY</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    variable_params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/params.html">params</a></span><span class="op">(</span></span>
<span>        <span class="co"># Use Base Items only</span></span>
<span>        filter_add <span class="op">=</span> <span class="va">PARCAT5</span> <span class="op">==</span> <span class="st">"VFQ-25"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html" class="external-link">str_sub</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span> <span class="op">==</span> <span class="st">"QSB"</span> <span class="op">&amp;</span></span>
<span>          <span class="va">PARCAT4</span> <span class="op">!=</span> <span class="st">"General Health"</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>        set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>          AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>          PARAMCD <span class="op">=</span> <span class="st">"QBCSCORE"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/params.html">params</a></span><span class="op">(</span></span>
<span>        <span class="co"># Use optional items items only</span></span>
<span>        filter_add <span class="op">=</span> <span class="va">PARCAT5</span> <span class="op">==</span> <span class="st">"VFQ-39"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_sub.html" class="external-link">str_sub</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span> <span class="op">==</span> <span class="st">"QSO"</span> <span class="op">&amp;</span></span>
<span>          <span class="va">PARCAT4</span> <span class="op">!=</span> <span class="st">"General Health"</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>        set_values_to <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span></span>
<span>          AVAL <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">AVAL</span><span class="op">)</span>,</span>
<span>          PARAMCD <span class="op">=</span> <span class="st">"QOCSCORE"</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We then assign <code>PARAM</code>/<code>PARAMCD</code> and
<code>PARCATy</code> for these new overall composite records by merging
with the relevant lookup table, and append them to
<code>advfq</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">advfq</span> <span class="op">&lt;-</span> <span class="va">advfq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="st">"SCORE"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">PARAM</span>, <span class="op">-</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"PARCAT"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https:/pharmaverse.github.io/admiral/v1.3.1/cran-release/reference/derive_vars_merged_lookup.html">derive_vars_merged_lookup</a></span><span class="op">(</span></span>
<span>    dataset_add <span class="op">=</span> <span class="va">param_lookup_composite</span>,</span>
<span>    new_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARAM</span>, <span class="va">PARCAT1</span>, <span class="va">PARCAT2</span>, <span class="va">PARCAT3</span>, <span class="va">PARCAT4</span>, <span class="va">PARCAT5</span><span class="op">)</span>,</span>
<span>    by_vars <span class="op">=</span> <span class="fu"><a href="https://rlang.r-lib.org/reference/defusing-advanced.html" class="external-link">exprs</a></span><span class="op">(</span><span class="va">PARAMCD</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">advfq</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">PARAMCD</span>, <span class="st">"SCORE"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; All `PARAMCD` are mapped.</span></span></code></pre></div>
<p>Here’s what the overall composite records using the Base and Optional
items for one patient’s baseline visit:</p>
<div id="htmlwidget-4018eef1a407a0df6b52" style="width:auto;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4018eef1a407a0df6b52">{"x":{"filter":"top","vertical":false,"filterHTML":"<tr>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;01-701-1034&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\" disabled=\"\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Baseline&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Color Vision Score (incl. Optional Items)&quot;,&quot;Composite Score (incl. Optional Items)&quot;,&quot;Distance Activities Score (incl. Optional Items)&quot;,&quot;Driving Score (incl. Optional Items)&quot;,&quot;General Vision Score (incl. Optional Items)&quot;,&quot;Near Activities Score (incl. Optional Items)&quot;,&quot;Ocular Pain Score (incl. Optional Items)&quot;,&quot;Peripheral Vision Score (incl. Optional Items)&quot;,&quot;Vision Specific: Dependency Score (incl. Optional Items)&quot;,&quot;Vision Specific: Mental Health Score (incl. Optional Items)&quot;,&quot;Vision Specific: Social Functioning Score (incl. Optional Items)&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;QOCSCORE&quot;,&quot;QSOCV&quot;,&quot;QSODA&quot;,&quot;QSODP&quot;,&quot;QSODR&quot;,&quot;QSOGV&quot;,&quot;QSOMH&quot;,&quot;QSONA&quot;,&quot;QSOOP&quot;,&quot;QSOPV&quot;,&quot;QSOSF&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Color Vision&quot;,&quot;Composite Score&quot;,&quot;Distance Activities&quot;,&quot;Driving&quot;,&quot;General Vision&quot;,&quot;Near Activities&quot;,&quot;Ocular Pain&quot;,&quot;Peripheral Vision&quot;,&quot;Vision Specific: Dependency&quot;,&quot;Vision Specific: Mental Health&quot;,&quot;Vision Specific: Social Functioning&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none;position: absolute;width: 200px;opacity: 1\">\n      <div data-min=\"37.5\" data-max=\"100\" data-scale=\"14\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","extensions":["Buttons","ColReorder","Scroller"],"data":[["01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034","01-701-1034"],["Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Baseline","Baseline"],["Composite Score (incl. Optional Items)","Color Vision Score (incl. Optional Items)","Distance Activities Score (incl. Optional Items)","Vision Specific: Dependency Score (incl. Optional Items)","Driving Score (incl. Optional Items)","General Vision Score (incl. Optional Items)","Vision Specific: Mental Health Score (incl. Optional Items)","Near Activities Score (incl. Optional Items)","Ocular Pain Score (incl. Optional Items)","Peripheral Vision Score (incl. Optional Items)","Vision Specific: Social Functioning Score (incl. Optional Items)"],["QOCSCORE","QSOCV","QSODA","QSODP","QSODR","QSOGV","QSOMH","QSONA","QSOOP","QSOPV","QSOSF"],["Composite Score","Color Vision","Distance Activities","Vision Specific: Dependency","Driving","General Vision","Vision Specific: Mental Health","Near Activities","Ocular Pain","Peripheral Vision","Vision Specific: Social Functioning"],[70.5,100,66.66666666666667,37.5,91.66666666666667,80,66.66666666666667,87.5,37.5,75,62.5]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>USUBJID<\/th>\n      <th>AVISIT<\/th>\n      <th>PARAM<\/th>\n      <th>PARAMCD<\/th>\n      <th>PARCAT4<\/th>\n      <th>AVAL<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"targets":[],"visible":false},{"className":"dt-right","targets":5},{"name":"USUBJID","targets":0},{"name":"AVISIT","targets":1},{"name":"PARAM","targets":2},{"name":"PARAMCD","targets":3},{"name":"PARCAT4","targets":4},{"name":"AVAL","targets":5}],"searchHighlight":true,"searching":true,"pageLength":5,"lengthMenu":[5,10,15,20,50,100],"dom":"<Bfr<\"dt-scroll\"t>ipl>","buttons":[{"extend":"colvis","text":"Choose the columns to display","scroller":true,"collectionLayout":"fixed two-column"}],"colReorder":true,"order":[],"autoWidth":false,"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="section level3">
<h3 id="further">Further Derivations of Standard BDS Variables<a class="anchor" aria-label="anchor" href="#further"></a>
</h3>
<p>The user is invited to consult the article on <a href="https://pharmaverse.github.io/admiral/articles/bds_finding.html" class="external-link">creating
a BDS dataset from SDTM</a> to learn how to add standard BDS variables
to ADVFQ.</p>
</div>
<div class="section level3">
<h3 id="example">Example Script<a class="anchor" aria-label="anchor" href="#example"></a>
</h3>
<table class="table">
<colgroup>
<col width="22%">
<col width="77%">
</colgroup>
<thead><tr class="header">
<th>ADaM</th>
<th>Sample Code</th>
</tr></thead>
<tbody><tr class="odd">
<td>ADVFQ</td>
<td><a href="https://github.com/pharmaverse/admiralophtha/blob/main/inst/templates/ad_advfq.R" class="external-link">ad_advfq.R</a></td>
</tr></tbody>
</table>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by F. Hoffmann-La Roche AG, Novartis AG, Edoardo Mancini, Ritika Aggarwal, Jane Gao, William Holmes, Josie Jackson, Sonali Jain, Yuki Matsunaga, Gordon Miller, Rachel Linacre, Lucy Palmen, Nandini R Thampi, Aldrich Salva, Steven Ting.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
